<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Icon Boxes</title>
    <script src="jcquery.js"></script>
    <style>
        body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    /* margin: 0;
    padding: 0; */
    display: flex;
    justify-content: center;
    align-items: center;
    height: -100vh;
}

.container {
    background-color: #fff;
    padding: 70px;
    border-radius: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    width: 5000px;
}

.form-group {
    margin-bottom: 15px;
}

label {
    display: block;
    margin-bottom: 5px;
}

input, select {
    width: 100%;
    padding: 8px;
    box-sizing: border-box;
    border-radius: 10px;
}

button {
    padding: 10px 15px;
    margin: 5px;
    border: none;
    background-color: #ffffff;
    color: white;
    border-radius: 5px;
    cursor: pointer;
    border: 3px solid black
}

button:hover {
    background-color: #218838;
}

.background-block {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url(1b553d15-efeb-4ad3-8da2-2ed9497912ed.jpeg);
            z-index: -1;
        }

        .icon-container {
            display: grid;
            gap: 20px;
            padding: 5px;
            width: 90%;
            max-width: 100px;
            z-index: 1;
            margin-top: -200px;
        }

  
        .icon-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 5px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .icon-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

       
        .icon-box p {
            font-size: 16px;
            color: #333;
        }

.ticket {
    margin-top: 20px;
    padding: 15px;
    background-color: #e9ecef;
    border-radius: 5px;
    display: none;
}

.rekap {
    margin-top: 20px;
    text-align: left;
}

.rekap ul {
    max-height: 200px; /* Atur tinggi maksimal sesuai kebutuhan */
    overflow-y: auto; /* Membuat scroll vertikal muncul jika konten melebihi max-height */
    list-style-type: none; /* Menghilangkan bullet points */
    padding: 0;
    margin: 0;
}

.rekap ul li {
    background-color: #f8f9fa;
    margin: 5px 0;
    padding: 10px;
    border-radius: 5px;
}



        /* modal */
        .modal {
            display: none;
            position: fixed;
            top: 0; 
            left: 0; 
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }
        .modal-content {
            background: #fff;
            margin: 10% auto;
            padding: 20px;
            width: 300px;
            text-align: center;
            border-radius: 5px;
        }
        .modals {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .modals-content {
            background: #fff;
            margin: 10% auto;
            padding: 20px;
            width: 300px;
            text-align: center;
            border-radius: 5px;
        }

        .modalss {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }
        .modalss-content {
            background: #fff;
            margin: 10% auto;
            padding: 20px;
            width: 300px;
            text-align: center;
            border-radius: 5px;
        }

        .mod {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }
        .mod-content {
            background: #fff;
            margin: 10% auto;
            padding: 20px;
            width: 300px;
            text-align: center;
            border-radius: 5px;
        }
        .close {
            cursor: pointer;
            color: red;
        }
        .letak {
            text-align: right;
        }
        #btnEntry{
            background-color: #4CAF50;
        }
        #btnExit{
            background-color: #ff0000;
        }
        #screenshot-btn {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
}

/* tooltopss */

#tooltipss {
    display: none;
    position: absolute;
    background-color: #ff0000;
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 1000;
}

#tooltips {
    display: none;
    position: absolute;
    background-color: #005a0d;
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 1000;
}

#tooltipsss {
    display: none;
    position: absolute;
    background-color: #005a0d;
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 1000;
}

#tooltipss1 {
    display: none;
    position: absolute;
    background-color: #005a0d;
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 1000;
}

#tooltipss2 {
    display: none;
    position: absolute;
    background-color: #005a0d;
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 1000;
}

#tooltipss3 {
    display: none;
    position: absolute;
    background-color: #005a0d;
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 1000;
}


#tooltipButton {
    margin: 50px;
    padding: 10px 20px;
    font-size: 16px;
}
 /* .icon-box i {
            font-size: 40px;
            color: #4CAF50;
            margin-bottom: 10px;
        } */

              /* @media (max-width: 768px) {
            .icon-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .icon-container {
                grid-template-columns: 1fr;
                grid-auto-rows: 1fr;
            }
        } */

                /* .main-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        } */
    </style>
    <!-- Include Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <h1>Sistem Parkir</h1>
        <div class="form-group">
            <label for="vehicleType">Jenis Kendaraan:</label>
            <select id="vehicleType">
                <option value="motor">Motor</option>
                <option value="mobil">Mobil</option>
            </select>
        </div>
        <div class="form-group">
            <label for="plateNumber">Nomor Plat:</label>
            <input type="text" id="plateNumber" placeholder="Masukkan Nomor Plat">
        </div>
        <button id="btnEntry" title="Masuk parkiran"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: scaleY(-1);msFilter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);"><path d="M19.002 3h-14c-1.103 0-2 .897-2 2v4h2V5h14v14h-14v-4h-2v4c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V5c0-1.103-.898-2-2-2z"></path><path d="m11 16 5-4-5-4v3.001H3v2h8z"></path></svg></button>
        <div id="tooltips">Masuk Parkiran</div>
        <button id="btnExit" title="Keluar parkiran"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: scaleX(-1);msFilter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);"><path d="M19.002 3h-14c-1.103 0-2 .897-2 2v4h2V5h14v14h-14v-4h-2v4c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V5c0-1.103-.898-2-2-2z"></path><path d="m11 16 5-4-5-4v3.001H3v2h8z"></path></svg></button>
        <div id="tooltipss">Keluar parkiran</div>

        <!-- <button id="openModal">Buka karcis</button> -->
        <!-- <button id="opensModal">Buka Rekap parkir</button> -->
        <div id="alertMessage" style="display: none; color: red; font-weight: bold;"></div>
    </div>
    <div class="main-container">
        <div class="background-block"></div>
        <div class="icon-container">
            <div class="icon-box">
                <i class="fas fa-home"></i>
                <a href="#" id="opensModal"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: msFilter"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm1 14.915V18h-2v-1.08c-2.339-.367-3-2.002-3-2.92h2c.011.143.159 1 2 1 1.38 0 2-.585 2-1 0-.324 0-1-2-1-3.48 0-4-1.88-4-3 0-1.288 1.029-2.584 3-2.915V6.012h2v1.109c1.734.41 2.4 1.853 2.4 2.879h-1l-1 .018C13.386 9.638 13.185 9 12 9c-1.299 0-2 .516-2 1 0 .374 0 1 2 1 3.48 0 4 1.88 4 3 0 1.288-1.029 2.584-3 2.915z"></path></svg></a>
                <div id="tooltipss3">Rekap</div>
            </div>
            <div class="icon-box">
                <i class="fas fa-user"></i>
                <a href="#" id="openModal"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: msFilter"><path d="M19 2H5c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h3.586L12 21.414 15.414 18H19c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zm0 14h-4.414L12 18.586 9.414 16H5V4h14v12z"></path><circle cx="15" cy="10" r="2"></circle><circle cx="9" cy="10" r="2"></circle></svg></a>
                <div id="tooltipss2">Karcis</div>
            </div>
            <div class="icon-box">
                <i class="fas fa-envelope"></i>
                <a href="#" id="opensaja" style="text-decoration: none; color: black;" ><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: msFilter"><path d="M16 2H8C4.691 2 2 4.691 2 8v12a1 1 0 0 0 1 1h13c3.309 0 6-2.691 6-6V8c0-3.309-2.691-6-6-6zm4 13c0 2.206-1.794 4-4 4H4V8c0-2.206 1.794-4 4-4h8c2.206 0 4 1.794 4 4v7z"></path><circle cx="9.5" cy="11.5" r="1.5"></circle><circle cx="14.5" cy="11.5" r="1.5"></circle></svg></a>
                <div id="tooltipss1">pesan</div>
            </div>
            <div class="icon-box">
                <i class="fas fa-envelope"></i>
                <a href="#" id="opensajas" style="text-decoration: none; color: black;" ><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: msFilter"><path d="m12 17 1-2V9.858c1.721-.447 3-2 3-3.858 0-2.206-1.794-4-4-4S8 3.794 8 6c0 1.858 1.279 3.411 3 3.858V15l1 2z"></path><path d="m16.267 10.563-.533 1.928C18.325 13.207 20 14.584 20 16c0 1.892-3.285 4-8 4s-8-2.108-8-4c0-1.416 1.675-2.793 4.267-3.51l-.533-1.928C4.197 11.54 2 13.623 2 16c0 3.364 4.393 6 10 6s10-2.636 10-6c0-2.377-2.197-4.46-5.733-5.437z"></path></svg></a>
                <div id="tooltipsss">lokasi</div>
            </div>
        </div>
    </div>
    <!-- karcis -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <div class="letak">
                <span class="close">&times;</span>
            </div>
            <div id="ticket" class="ticket">
                <h2>Karcis Parkir</h2>
                <p id="ticketInfo"></p>
                <button id="screenshot-btn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: msFilter"><path d="M19 14h-2v3h-3v2h3v3h2v-3h3v-2h-3zM4 19h3v-2H5v-2H3v3a1 1 0 0 0 1 1zM19 4a1 1 0 0 0-1-1h-3v2h2v2h2V4zM5 5h2V3H4a1 1 0 0 0-1 1v3h2V5zM3 9h2v4H3zm14 0h2v3h-2zM9 3h4v2H9zm0 14h3v2H9z"></path></svg></button>
            </div>
            <p><span style="color: #ff0000;">Peringatan!!</span> Screen shot karcis ini </p>
        </div>
    </div>
    <!-- rekap parkir -->
    <div id="myModals" class="modals">
        <div class="modal-content">
            <div class="letak">
                <span class="close">&times;</span>
            </div>
            <div class="rekap">
                <h2>Rekap Parkir</h2>
                <ul id="rekapList"></ul>
                <button id="btnClear"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: msFilter"><path d="M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"></path><path d="M9 10h2v8H9zm4 0h2v8h-2z"></path></svg></button>
                <button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: msFilter"><path d="M16 12h2v4h-2z"></path><path d="M20 7V5c0-1.103-.897-2-2-2H5C3.346 3 2 4.346 2 6v12c0 2.201 1.794 3 3 3h15c1.103 0 2-.897 2-2V9c0-1.103-.897-2-2-2zM5 5h13v2H5a1.001 1.001 0 0 1 0-2zm15 14H5.012C4.55 18.988 4 18.805 4 18V8.815c.314.113.647.185 1 .185h15v10z"></path></svg></button>
            </div>
        </div>
    </div>

    <div id="myModalss" class="modalss">
        <div class="modalss-content">
            <div class="letak">
                <span class="close">&times;</span>
            </div>
            <div class="rekap">
                <h2>Pesan</h2>
                <ul id="rekapList"></ul>
                <p>.Jika Karcis tidak screen shot maka tidak bisa masuk simpan ke gallery Anda

                    .Jika Ingin keluar masukkan kembali kode parkir anda dan plat nya dengan benar jika salah akan di denda sebesar <span style="color: #ff0000;">50.000</span>
                </p>
            </div>
        </div>
    </div>

    <div id="myMod" class="mod">
        <div class="mod-content">
            <div class="letak">
                <span class="close">&times;</span>
            </div>
            <div class="rekap">
                <h2>Lokasi yang memakai APP</h2>
                <ul id="rekapList"></ul>
            </div>
        </div>
    </div>
    
    
</body>
<script>

    // modals //
     $(document).ready(function(){
            $("#openModal").click(function(){
                $("#myModal").fadeIn();
            });
            $(".close, .modal").click(function(event){
                if(event.target == this) {
                    $("#myModal").fadeOut();
                }
            });
        });
        $(document).ready(function(){
            $("#opensModal").click(function(){
                $("#myModals").fadeIn();
            });
            $(".close, .modals").click(function(event){
                if(event.target == this) {
                    $("#myModals").fadeOut();
                }
            });
        });
        $(document).ready(function(){
            $("#opensaja").click(function(){
                $("#myModalss").fadeIn();
            });
            $(".close, .modalss").click(function(event){
                if(event.target == this) {
                    $("#myModalss").fadeOut();
                }
            });
        });
        $(document).ready(function(){
            $("#opensajas").click(function(){
                $("#myMod").fadeIn();
            });
            $(".close, .mod").click(function(event){
                if(event.target == this) {
                    $("#myMod").fadeOut();
                }
            });
        });
        // ///

        $(document).ready(function () {
    let parkingRecords = JSON.parse(localStorage.getItem('parkingRecords')) || [];

    // Simpan data ke Local Storage
    function saveToLocalStorage() {
        localStorage.setItem('parkingRecords', JSON.stringify(parkingRecords));
    }

    // Generate Kode Parkir Otomatis
    function generateParkingCode() {
        const timestamp = Date.now().toString(36); // Timestamp dalam base36
        const randomNum = Math.floor(Math.random() * 1000).toString(36); // Nomor acak dalam base36
        return `${timestamp}-${randomNum}`.toUpperCase(); // Gabungkan dan ubah ke huruf besar
    }

    function isVehicleAlreadyParked(plateNumber) {
        return parkingRecords.some(ticket => 
            ticket.plateNumber === plateNumber && !ticket.exitTime
        );
    }

    // Catat Masuk Kendaraan
    $('#btnEntry').click(function () {
        const vehicleType = $('#vehicleType').val();
        const plateNumber = $('#plateNumber').val().trim();

        if (!plateNumber) {
            alert('Nomor polisi harus diisi!');
            return;
        }

        // Cek apakah kendaraan sudah masuk dan belum keluar
        if (isVehicleAlreadyParked(plateNumber)) {
            alert(`Kendaraan dengan nomor polisi ${plateNumber} sudah masuk dan belum keluar!`);
            return;
        }

        const entryTime = new Date();
        const parkingCode = generateParkingCode(); // Generate kode parkir otomatis

        const ticket = {
            vehicleType,
            plateNumber,
            parkingCode,
            entryTime: entryTime.toISOString(),
            exitTime: null,
            cost: 0
        };

        parkingRecords.push(ticket);
        saveToLocalStorage();
        alert(`Kendaraan ${plateNumber} masuk pada ${entryTime.toLocaleString()}\nKode Parkir: ${parkingCode} Cek karcis anda`);
        updateTicket(ticket);
    });

    // Catat Keluar Kendaraan
    $('#btnExit').click(function () {
        const plateNumber = $('#plateNumber').val().trim();

        const ticket = parkingRecords.find(t => t.plateNumber === plateNumber && !t.exitTime);

        if (!ticket) {
            $('#alertMessage').text('Karcis tidak valid atau nomor polisi tidak sesuai! Denda Rp 50.000').show();
            setTimeout(function() {
                $('#alertMessage').fadeOut();
            }, 20000); // Hide after 5 seconds
            return;
        }

        const exitTime = new Date();
        ticket.exitTime = exitTime.toISOString();

        const duration = (new Date(ticket.exitTime) - new Date(ticket.entryTime));
        const hours = duration / (1000 * 60 * 60); // Durasi dalam jam

        let cost = calculateCost(ticket.vehicleType, hours);

        if (hours > 24) {
            if (ticket.vehicleType === 'mobil') {
                cost *= 0.9; // Diskon 10% untuk mobil
            } else if (ticket.vehicleType === 'motor') {
                cost *= 0.85; // Diskon 15% untuk motor
            }
        }

        ticket.cost = cost;

        // Simpan data ke Local Storage
        saveToLocalStorage();

        // Kirim data ke server (simulasi AJAX)
        $.ajax({
            url: 'https://jsonplaceholder.typicode.com/posts', // Contoh endpoint
            method: 'POST',
            data: JSON.stringify(ticket),
            contentType: 'application/json',
            success: function (response) {
                console.log('Data berhasil dikirim ke server:', response);
                alert(`Kendaraan ${ticket.plateNumber} keluar pada ${exitTime.toLocaleString()}\nBiaya parkir: Rp ${cost.toFixed(2)}`);
                updateRekap();
            },
            error: function (err) {
                console.error('Gagal mengirim data ke server:', err);
            }
        });
    });

    // Hitung Biaya Parkir
    function calculateCost(vehicleType, hours) {
        const rate = vehicleType === 'motor' ? 3000 : 5000;
        return rate * Math.ceil(hours);
    }

    // Update Tampilan Karcis
    function updateTicket(ticket) {
        $('#ticketInfo').html(`
            Jenis Kendaraan: ${ticket.vehicleType}<br>
            Nomor Polisi: ${ticket.plateNumber}<br>
            Kode Parkir: ${ticket.parkingCode}<br>
            Jam Masuk: ${new Date(ticket.entryTime).toLocaleString()}
        `);
        $('#ticket').show();
    }

    // Update Rekap Parkir
    function updateRekap() {
        $('#rekapList').empty();
        parkingRecords.forEach(ticket => {
            if (ticket.exitTime) {
                $('#rekapList').append(`
                    <li>
                        ${ticket.vehicleType} - ${ticket.plateNumber}<br>
                        Kode Parkir: ${ticket.parkingCode}<br>
                        Masuk: ${new Date(ticket.entryTime).toLocaleString()}<br>
                        Keluar: ${new Date(ticket.exitTime).toLocaleString()}<br>
                        Biaya: Rp ${ticket.cost.toFixed(2)}
                    </li>
                `);
            }
        });
    }

    // Tampilkan data rekap saat halaman dimuat
    updateRekap();
    function clearLocalStorage() {
    localStorage.removeItem('parkingRecords');
    parkingRecords = []; // Kosongkan array
    updateRekap(); // Perbarui tampilan rekap
}
$('#btnClear').click(function () {
    clearLocalStorage();
    alert('Data parkir telah dihapus.');
});
    // Tampilkan data rekap saat halaman dimuat
    updateRekap();
});


// screenshot //
$(document).ready(function() {
    $('#screenshot-btn').click(function() {
        html2canvas(document.body).then(function(canvas) {
            var link = document.createElement('a');
            link.download = 'karcis.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    });
});

// tooltip //
$(document).ready(function() {
    $('#btnEntry').hover(function(event) {
        // Tampilkan tooltip
        $('#tooltips').css({
            top: event.pageY + 10,
            left: event.pageX + 10
        }).fadeIn(200);
    }, function() {
        // Sembunyikan tooltip
        $('#tooltips').fadeOut(200);
    });
});
$(document).ready(function() {
    $('#btnExit').hover(function(event) {
        // Tampilkan tooltip
        $('#tooltipss').css({
            top: event.pageY + 10,
            left: event.pageX + 10
        }).fadeIn(200);
    }, function() {
        // Sembunyikan tooltip
        $('#tooltipss').fadeOut(200);
    });
});
$(document).ready(function() {
    $('#opensajas').hover(function(event) {
        // Tampilkan tooltip
        $('#tooltipsss').css({
            right: event.pageY + -150,
        }).fadeIn(200);
    }, function() {
        // Sembunyikan tooltip
        $('#tooltipsss').fadeOut(200);
    });
});
$(document).ready(function() {
    $('#opensaja').hover(function(event) {
        // Tampilkan tooltip
        $('#tooltipss1').css({
            right: event.pageY + -100,
        }).fadeIn(200);
    }, function() {
        // Sembunyikan tooltip
        $('#tooltipss1').fadeOut(200);
    });
});
$(document).ready(function() {
    $('#openModal').hover(function(event) {
        // Tampilkan tooltip
        $('#tooltipss2').css({
            right: event.pageY + -50,
        }).fadeIn(200);
    }, function() {
        // Sembunyikan tooltip
        $('#tooltipss2').fadeOut(200);
    });
});
$(document).ready(function() {
    $('#opensModal').hover(function(event) {
        // Tampilkan tooltip
        $('#tooltipss3').css({
            right: event.pageY + -10,
        }).fadeIn(200);
    }, function() {
        // Sembunyikan tooltip
        $('#tooltipss3').fadeOut(200);
    });
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</html>
